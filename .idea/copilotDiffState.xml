<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/api/consulta-obra/route.ts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/api/consulta-obra/route.ts" />
              <option name="originalContent" value="import { NextRequest, NextResponse } from &quot;next/server&quot;;&#10;import { obrasDB, contratosDB } from &quot;@/lib/db&quot;;&#10;import { RowDataPacket, PoolConnection } from &quot;mysql2/promise&quot;;&#10;&#10;export async function GET(request: NextRequest) {&#10;  let connectionObras: PoolConnection | undefined;&#10;  let connectionContratos: PoolConnection | undefined;&#10;  &#10;  try {&#10;    // Obter parâmetros de filtro da URL&#10;    const { searchParams } = new URL(request.url);&#10;    const statusId = searchParams.get('status_id');&#10;    const unidadeId = searchParams.get('unidade_id');&#10;    &#10;    // Tentar obter conexão com banco de obras&#10;    connectionObras = await obrasDB.getConnection();&#10;    console.log(&quot;Conexão com banco de obras estabelecida&quot;);&#10;    &#10;  // Construir query com filtros dinâmicos&#10;  const whereConditions: string[] = [];&#10;  const queryParams: unknown[] = [];&#10;    &#10;    if (statusId &amp;&amp; statusId !== 'all') {&#10;      whereConditions.push('o.status_id = ?');&#10;      queryParams.push(parseInt(statusId));&#10;    }&#10;    &#10;    if (unidadeId &amp;&amp; unidadeId !== 'all') {&#10;      whereConditions.push('o.unidade_id = ?');&#10;      queryParams.push(parseInt(unidadeId));&#10;    }&#10;    &#10;    const whereClause = whereConditions.length &gt; 0 &#10;      ? `WHERE ${whereConditions.join(' AND ')}` &#10;      : '';&#10;    &#10;    // Buscar obras com nome da regional - conectar ao banco de contratos para ordenar&#10;    connectionContratos = await contratosDB.getConnection();&#10;    console.log(&quot;Conexão com banco de contratos estabelecida&quot;);&#10;    &#10;    // Buscar obras com nome da regional e número do contrato para ordenar por ano&#10;    const [obras] = await connectionObras.query&lt;RowDataPacket[]&gt;(&#10;      `SELECT &#10;        o.id,&#10;        o.contrato_id,&#10;        o.contrato_numero,&#10;        o.status_id,&#10;        o.unidade_id,&#10;        r.nome as regional_nome&#10;       FROM obra o&#10;       LEFT JOIN regional r ON o.unidade_id = r.id&#10;       ${whereClause}&#10;       ORDER BY o.contrato_id DESC, o.id DESC`,&#10;      queryParams&#10;    );&#10;&#10;    console.log(`Total de obras encontradas: ${obras.length}`);&#10;&#10;    // Filtrar apenas obras que possuem contrato_id válido&#10;    const obrasComContratoId = obras.filter(obra =&gt; &#10;      obra.contrato_id &amp;&amp; obra.contrato_id !== null &amp;&amp; obra.contrato_id &gt; 0&#10;    );&#10;    console.log(`Obras com contrato_id válido: ${obrasComContratoId.length} de ${obras.length}`);&#10;    &#10;    // Coletar IDs únicos de contratos para buscar em batch&#10;    const contratoIds = [...new Set(obrasComContratoId.map(obra =&gt; obra.contrato_id))];&#10;    console.log(`IDs únicos de contratos a buscar: ${contratoIds.join(', ')}`);&#10;    &#10;    // Buscar todos os contratos de uma vez (mais eficiente)&#10;    const contratosMap = new Map&lt;number, { numero_contrato?: string; objetoh?: string; valor?: number }&gt;();&#10;    if (contratoIds.length &gt; 0) {&#10;      const placeholders = contratoIds.map(() =&gt; '?').join(',');&#10;&#10;      // Primeiro tentar obter dados da tabela principal `contratos` (se existir)&#10;      try {&#10;        const [contratosPrincipais] = await connectionContratos.query&lt;RowDataPacket[]&gt;(&#10;          `SELECT id, numero_contrato as numero_contratoh, objeto as objetoh, valor&#10;           FROM contratos&#10;           WHERE id IN (${placeholders})`,&#10;          contratoIds&#10;        );&#10;&#10;        if (contratosPrincipais &amp;&amp; contratosPrincipais.length &gt; 0) {&#10;        contratosPrincipais.forEach((c: RowDataPacket) =&gt; {&#10;          const id = c.id as number;&#10;          contratosMap.set(id, {&#10;            numero_contrato: c.numero_contratoh as string,&#10;            objetoh: c.objetoh as string,&#10;            valor: Number(c.valor) || undefined,&#10;          });&#10;        });&#10;          console.log(`Contratos encontrados na tabela contratos: ${contratosPrincipais.length}`);&#10;        }&#10;      } catch {&#10;        // Se a tabela `contratos` não existir ou ocorrer erro, vamos usar o historico como fallback&#10;        console.log('Tabela `contratos` não disponível ou falha na consulta, usando `historico` como fallback.');&#10;      }&#10;&#10;      // Buscar dados no `historico` para todos os IDs — usar `valorh` como fonte primária do valor&#10;      const placeholdersHistAll = contratoIds.map(() =&gt; '?').join(',');&#10;      const [contratosHistAll] = await connectionContratos.query&lt;RowDataPacket[]&gt;(&#10;        `SELECT id, numero_contratoh, objetoh, dotacao_orcamentariah, valorh&#10;         FROM historico &#10;         WHERE id IN (${placeholdersHistAll})&#10;         ORDER BY CAST(SUBSTRING_INDEX(numero_contratoh, '/', 1) AS UNSIGNED) DESC, id DESC`,&#10;        contratoIds&#10;      );&#10;&#10;      contratosHistAll.forEach((contrato: RowDataPacket) =&gt; {&#10;        const id = contrato.id as number;&#10;        // Atualizar ou criar entrada no mapa — valor deve vir de valorh&#10;        const existing = contratosMap.get(id) || {};&#10;        contratosMap.set(id, {&#10;          numero_contrato: existing.numero_contrato || (contrato.numero_contratoh as string),&#10;          objetoh: existing.objetoh || (contrato.objetoh as string),&#10;          // Priorizar valorh do historico (valorh) como número&#10;          valor: Number(contrato.valorh as unknown) || undefined,&#10;        });&#10;        console.log(`✅ Contrato (hist) ${id}: ${contrato.numero_contratoh} - Valor: R$ ${contrato.valorh || 'NULL'}`);&#10;      });&#10;    }&#10;    &#10;    // Buscar informações dos contratos para cada obra&#10;    const obrasComContratos = await Promise.all(&#10;      obras.map(async (obra) =&gt; {&#10;        try {&#10;          console.log(`Processando obra ID ${obra.id}, contrato_id: ${obra.contrato_id}, status_id: ${obra.status_id}`);&#10;          &#10;          // Verificar se contrato_id existe e é válido&#10;          if (!obra.contrato_id || obra.contrato_id === null || obra.contrato_id === 0) {&#10;            console.log(`⚠️  Obra ${obra.id} sem contrato_id válido`);&#10;            &#10;            // Buscar arquivos mesmo sem contrato&#10;            let arquivos: RowDataPacket[] = [];&#10;            try {&#10;              const [result] = await connectionObras!.query&lt;RowDataPacket[]&gt;(&#10;                `SELECT id, tipo, nome_arquivo, path_servidor&#10;                 FROM arquivoobra &#10;                 WHERE obra_id = ? AND extensao = 'pdf' AND tipo != 'Contrato'&#10;                 ORDER BY id ASC`,&#10;                [obra.id]&#10;              );&#10;              arquivos = result || [];&#10;            } catch (arquivoError) {&#10;              console.error(`Erro ao buscar arquivos da obra ${obra.id}:`, arquivoError);&#10;            }&#10;            &#10;            return {&#10;              ...obra,&#10;              numero_contrato: null,&#10;              objeto_contrato: null,&#10;              valor_contrato: null,&#10;              arquivos: arquivos.map((arq: RowDataPacket) =&gt; ({&#10;                id: arq.id,&#10;                tipo: (arq.tipo as string) || 'PDF',&#10;                nome: (arq.nome_arquivo as string) || (arq.nome as string) || 'Arquivo sem nome',&#10;                url: `https://epamigsistema.com/obras/web/${arq.path_servidor}`&#10;              }))&#10;            };&#10;          }&#10;          &#10;          // Buscar dados do contrato no Map (já carregado)&#10;          const contrato = contratosMap.get(Number(obra.contrato_id));&#10;          &#10;          if (contrato) {&#10;            console.log(`✅ Contrato encontrado para obra ${obra.id}: ${contrato.numero_contrato} - Valor: R$ ${contrato.valor ?? 'NULL'}`);&#10;          } else {&#10;            console.log(`❌ Contrato ${obra.contrato_id} não encontrado para obra ${obra.id}`);&#10;          }&#10;          &#10;          // Buscar arquivos da obra - agrupados por contrato_numero&#10;          let arquivos: RowDataPacket[] = [];&#10;          let arquivosContrato: RowDataPacket[] = [];&#10;&#10;          try {&#10;            // Buscar arquivos da própria obra&#10;            const [result] = await connectionObras!.query&lt;RowDataPacket[]&gt;(&#10;              `SELECT id, tipo, nome_arquivo, path_servidor, obra_id&#10;               FROM arquivoobra &#10;               WHERE obra_id = ?&#10;               ORDER BY tipo ASC, id ASC`,&#10;              [obra.id]&#10;            );&#10;            arquivos = result || [];&#10;            console.log(` Arquivos para obra ${obra.id}: ${arquivos.length}`);&#10;&#10;            // Se a obra tem contrato, buscar também arquivos de outras obras com mesmo contrato_numero&#10;            if (contrato?.numero_contrato &amp;&amp; obra.contrato_numero) {&#10;              // Buscar todas as obras com mesmo contrato_numero&#10;              const [obrasRelacionadas] = await connectionObras!.query&lt;RowDataPacket[]&gt;(&#10;                `SELECT id FROM obra WHERE contrato_numero = ? AND id != ?`,&#10;                [obra.contrato_numero, obra.id]&#10;              );&#10;&#10;              if (obrasRelacionadas &amp;&amp; obrasRelacionadas.length &gt; 0) {&#10;                const obraIds = obrasRelacionadas.map((o: RowDataPacket) =&gt; o.id);&#10;                const placeholders = obraIds.map(() =&gt; '?').join(',');&#10;&#10;                // Buscar arquivos de todas as obras relacionadas&#10;                const [resultRelacionados] = await connectionObras!.query&lt;RowDataPacket[]&gt;(&#10;                  `SELECT id, tipo, nome_arquivo, path_servidor, obra_id&#10;                   FROM arquivoobra &#10;                   WHERE obra_id IN (${placeholders})&#10;                   ORDER BY obra_id ASC, tipo ASC, id ASC`,&#10;                  obraIds&#10;                );&#10;                arquivosContrato = resultRelacionados || [];&#10;                console.log(` Arquivos do contrato ${obra.contrato_numero}: ${arquivosContrato.length}`);&#10;              }&#10;            }&#10;          } catch (arquivoError) {&#10;            console.error(`Erro ao buscar arquivos da obra ${obra.id}:`, arquivoError);&#10;            arquivos = [];&#10;            arquivosContrato = [];&#10;          }&#10;          &#10;          return {&#10;            ...obra,&#10;            numero_contrato: contrato?.numero_contrato || null,&#10;            objeto_contrato: contrato?.objetoh || null,&#10;            valor_contrato: contrato?.valor ?? null,&#10;            arquivos: arquivos.map((arq: RowDataPacket) =&gt; ({&#10;              id: arq.id,&#10;              tipo: (arq.tipo as string) || 'Arquivo',&#10;              nome: (arq.nome_arquivo as string) || (arq.nome as string) || 'Arquivo sem nome',&#10;              url: `https://epamigsistema.com/obras/web/${arq.path_servidor}`,&#10;              obra_id: arq.obra_id&#10;            })),&#10;            arquivos_contrato: arquivosContrato.map((arq: RowDataPacket) =&gt; ({&#10;              id: arq.id,&#10;              tipo: (arq.tipo as string) || 'Arquivo',&#10;              nome: (arq.nome_arquivo as string) || (arq.nome as string) || 'Arquivo sem nome',&#10;              url: `https://epamigsistema.com/obras/web/${arq.path_servidor}`,&#10;              obra_id: arq.obra_id&#10;            }))&#10;          };&#10;        } catch (error) {&#10;          console.error(`❌ Erro ao processar obra ${obra.id}:`, error);&#10;          return {&#10;            ...obra,&#10;            numero_contrato: null,&#10;            objeto_contrato: null,&#10;            valor_contrato: null,&#10;            arquivos: []&#10;          };&#10;        }&#10;      })&#10;    );&#10;&#10;    // Buscar contagem por status para o gráfico (com filtros aplicados)&#10;    const [statusCount] = await connectionObras.query&lt;RowDataPacket[]&gt;(&#10;      `SELECT &#10;        o.status_id,&#10;        COUNT(*) as total&#10;       FROM obra o&#10;       ${whereClause}&#10;       GROUP BY o.status_id,&#10;       o.status_id&#10;       ORDER BY o.status_id ASC,o.status_id ASC`,&#10;      queryParams&#10;    );&#10;&#10;    // Buscar lista de regionais para o filtro&#10;    const [regionais] = await connectionObras.query&lt;RowDataPacket[]&gt;(&#10;      `SELECT id, nome FROM regional ORDER BY nome ASC`&#10;    );&#10;&#10;    console.log(`Total de status diferentes: ${statusCount.length}`);&#10;&#10;    // Ordenar obras pelo ano do contrato (primeiros 4 dígitos de numero_contrato) em ordem decrescente&#10;    const obrasOrdenadas = obrasComContratos.sort((a, b) =&gt; {&#10;      const anoA = a.numero_contrato ? parseInt(a.numero_contrato.split('/')[0]) : 0;&#10;      const anoB = b.numero_contrato ? parseInt(b.numero_contrato.split('/')[0]) : 0;&#10;      return anoB - anoA; // Ordem decrescente (ano mais recente primeiro)&#10;    });&#10;&#10;    return NextResponse.json({&#10;      success: true,&#10;      obras: obrasOrdenadas,&#10;      statusCount,&#10;      regionais,&#10;    });&#10;    &#10;  } catch (error: unknown) {&#10;    console.error(&quot;Erro detalhado ao buscar obras:&quot;, error);&#10;&#10;    // Type guard para erro do banco/SQL&#10;    const isDbError = (e: unknown): e is { code?: string; sqlMessage?: string; message?: string } =&gt; {&#10;      return typeof e === 'object' &amp;&amp; e !== null &amp;&amp; (&#10;        'code' in (e as object) || 'sqlMessage' in (e as object) || 'message' in (e as object)&#10;      );&#10;    };&#10;&#10;    // Verificar tipo de erro&#10;    let errorMessage = &quot;Erro ao buscar obras do banco de dados&quot;;&#10;&#10;    if (isDbError(error)) {&#10;      if (error.code === 'ECONNREFUSED') {&#10;        errorMessage = &quot;Não foi possível conectar ao banco de dados. Verifique se o MySQL está rodando.&quot;;&#10;      } else if (error.code === 'ER_NO_SUCH_TABLE') {&#10;        errorMessage = &quot;Tabela 'obra' não encontrada no banco de dados.&quot;;&#10;      } else if (error.code === 'ER_BAD_DB_ERROR') {&#10;        errorMessage = &quot;Banco de dados 'obra' não encontrado.&quot;;&#10;      } else if (error.sqlMessage) {&#10;        errorMessage = `Erro SQL: ${error.sqlMessage}`;&#10;      }&#10;    }&#10;&#10;    return NextResponse.json(&#10;      {&#10;        success: false,&#10;        error: errorMessage,&#10;        details: isDbError(error) &amp;&amp; error.message ? error.message : String(error),&#10;      },&#10;      { status: 500 }&#10;    );&#10;  } finally {&#10;    // Garantir que as conexões sejam liberadas&#10;    if (connectionObras) {&#10;      connectionObras.release();&#10;    }&#10;    if (connectionContratos) {&#10;      connectionContratos.release();&#10;    }&#10;  }&#10;}&#10;" />
              <option name="updatedContent" value="import { NextRequest, NextResponse } from &quot;next/server&quot;;&#10;import { obrasDB, contratosDB } from &quot;@/lib/db&quot;;&#10;import { RowDataPacket, PoolConnection } from &quot;mysql2/promise&quot;;&#10;&#10;export async function GET(request: NextRequest) {&#10;  let connectionObras: PoolConnection | undefined;&#10;  let connectionContratos: PoolConnection | undefined;&#10;  &#10;  try {&#10;    // Obter parâmetros de filtro da URL&#10;    const { searchParams } = new URL(request.url);&#10;    const statusId = searchParams.get('status_id');&#10;    const unidadeId = searchParams.get('unidade_id');&#10;    &#10;    // Tentar obter conexão com banco de obras&#10;    connectionObras = await obrasDB.getConnection();&#10;    console.log(&quot;Conexão com banco de obras estabelecida&quot;);&#10;    &#10;  // Construir query com filtros dinâmicos&#10;  const whereConditions: string[] = [];&#10;  const queryParams: unknown[] = [];&#10;    &#10;    if (statusId &amp;&amp; statusId !== 'all') {&#10;      whereConditions.push('o.status_id = ?');&#10;      queryParams.push(parseInt(statusId));&#10;    }&#10;    &#10;    if (unidadeId &amp;&amp; unidadeId !== 'all') {&#10;      whereConditions.push('o.unidade_id = ?');&#10;      queryParams.push(parseInt(unidadeId));&#10;    }&#10;    &#10;    const whereClause = whereConditions.length &gt; 0 &#10;      ? `WHERE ${whereConditions.join(' AND ')}` &#10;      : '';&#10;    &#10;    // Buscar obras com nome da regional - conectar ao banco de contratos para ordenar&#10;    connectionContratos = await contratosDB.getConnection();&#10;    console.log(&quot;Conexão com banco de contratos estabelecida&quot;);&#10;    &#10;    // Buscar obras com nome da regional e número do contrato para ordenar por ano&#10;    const [obras] = await connectionObras.query&lt;RowDataPacket[]&gt;(&#10;      `SELECT &#10;        o.id,&#10;        o.contrato_id,&#10;        o.contrato_numero,&#10;        o.status_id,&#10;        o.unidade_id,&#10;        r.nome as regional_nome&#10;       FROM (&#10;          SELECT &#10;              *,&#10;              ROW_NUMBER() OVER (PARTITION BY contrato_numero ORDER BY id DESC) as rn&#10;          FROM obra&#10;       ) o&#10;       LEFT JOIN regional r ON o.unidade_id = r.id&#10;       ${whereClause.replace('o.', '')}&#10;       AND o.rn = 1&#10;       ORDER BY o.contrato_id DESC, o.id DESC`,&#10;      queryParams&#10;    );&#10;&#10;    console.log(`Total de obras encontradas: ${obras.length}`);&#10;&#10;    // Filtrar apenas obras que possuem contrato_id válido&#10;    const obrasComContratoId = obras.filter(obra =&gt; &#10;      obra.contrato_id &amp;&amp; obra.contrato_id !== null &amp;&amp; obra.contrato_id &gt; 0&#10;    );&#10;    console.log(`Obras com contrato_id válido: ${obrasComContratoId.length} de ${obras.length}`);&#10;    &#10;    // Coletar IDs únicos de contratos para buscar em batch&#10;    const contratoIds = [...new Set(obrasComContratoId.map(obra =&gt; obra.contrato_id))];&#10;    console.log(`IDs únicos de contratos a buscar: ${contratoIds.join(', ')}`);&#10;    &#10;    // Buscar todos os contratos de uma vez (mais eficiente)&#10;    const contratosMap = new Map&lt;number, { numero_contrato?: string; objetoh?: string; valor?: number }&gt;();&#10;    if (contratoIds.length &gt; 0) {&#10;      const placeholders = contratoIds.map(() =&gt; '?').join(',');&#10;&#10;      // Primeiro tentar obter dados da tabela principal `contratos` (se existir)&#10;      try {&#10;        const [contratosPrincipais] = await connectionContratos.query&lt;RowDataPacket[]&gt;(&#10;          `SELECT id, numero_contrato as numero_contratoh, objeto as objetoh, valor&#10;           FROM contratos&#10;           WHERE id IN (${placeholders})`,&#10;          contratoIds&#10;        );&#10;&#10;        if (contratosPrincipais &amp;&amp; contratosPrincipais.length &gt; 0) {&#10;        contratosPrincipais.forEach((c: RowDataPacket) =&gt; {&#10;          const id = c.id as number;&#10;          contratosMap.set(id, {&#10;            numero_contrato: c.numero_contratoh as string,&#10;            objetoh: c.objetoh as string,&#10;            valor: Number(c.valor) || undefined,&#10;          });&#10;        });&#10;          console.log(`Contratos encontrados na tabela contratos: ${contratosPrincipais.length}`);&#10;        }&#10;      } catch {&#10;        // Se a tabela `contratos` não existir ou ocorrer erro, vamos usar o historico como fallback&#10;        console.log('Tabela `contratos` não disponível ou falha na consulta, usando `historico` como fallback.');&#10;      }&#10;&#10;      // Buscar dados no `historico` para todos os IDs — usar `valorh` como fonte primária do valor&#10;      const placeholdersHistAll = contratoIds.map(() =&gt; '?').join(',');&#10;      const [contratosHistAll] = await connectionContratos.query&lt;RowDataPacket[]&gt;(&#10;        `SELECT id, numero_contratoh, objetoh, dotacao_orcamentariah, valorh&#10;         FROM historico &#10;         WHERE id IN (${placeholdersHistAll})&#10;         ORDER BY CAST(SUBSTRING_INDEX(numero_contratoh, '/', 1) AS UNSIGNED) DESC, id DESC`,&#10;        contratoIds&#10;      );&#10;&#10;      contratosHistAll.forEach((contrato: RowDataPacket) =&gt; {&#10;        const id = contrato.id as number;&#10;        // Atualizar ou criar entrada no mapa — valor deve vir de valorh&#10;        const existing = contratosMap.get(id) || {};&#10;        contratosMap.set(id, {&#10;          numero_contrato: existing.numero_contrato || (contrato.numero_contratoh as string),&#10;          objetoh: existing.objetoh || (contrato.objetoh as string),&#10;          // Priorizar valorh do historico (valorh) como número&#10;          valor: Number(contrato.valorh as unknown) || undefined,&#10;        });&#10;        console.log(`✅ Contrato (hist) ${id}: ${contrato.numero_contratoh} - Valor: R$ ${contrato.valorh || 'NULL'}`);&#10;      });&#10;    }&#10;    &#10;    // Buscar informações dos contratos para cada obra&#10;    const obrasComContratos = await Promise.all(&#10;      obras.map(async (obra) =&gt; {&#10;        try {&#10;          console.log(`Processando obra ID ${obra.id}, contrato_id: ${obra.contrato_id}, status_id: ${obra.status_id}`);&#10;          &#10;          // Verificar se contrato_id existe e é válido&#10;          if (!obra.contrato_id || obra.contrato_id === null || obra.contrato_id === 0) {&#10;            console.log(`⚠️  Obra ${obra.id} sem contrato_id válido`);&#10;            &#10;            // Buscar arquivos mesmo sem contrato&#10;            let arquivos: RowDataPacket[] = [];&#10;            try {&#10;              const [result] = await connectionObras!.query&lt;RowDataPacket[]&gt;(&#10;                `SELECT id, tipo, nome_arquivo, path_servidor&#10;                 FROM arquivoobra &#10;                 WHERE obra_id = ? AND extensao = 'pdf' AND tipo != 'Contrato'&#10;                 ORDER BY id ASC`,&#10;                [obra.id]&#10;              );&#10;              arquivos = result || [];&#10;            } catch (arquivoError) {&#10;              console.error(`Erro ao buscar arquivos da obra ${obra.id}:`, arquivoError);&#10;            }&#10;            &#10;            return {&#10;              ...obra,&#10;              numero_contrato: null,&#10;              objeto_contrato: null,&#10;              valor_contrato: null,&#10;              arquivos: arquivos.map((arq: RowDataPacket) =&gt; ({&#10;                id: arq.id,&#10;                tipo: (arq.tipo as string) || 'PDF',&#10;                nome: (arq.nome_arquivo as string) || (arq.nome as string) || 'Arquivo sem nome',&#10;                url: `https://epamigsistema.com/obras/web/${arq.path_servidor}`&#10;              }))&#10;            };&#10;          }&#10;          &#10;          // Buscar dados do contrato no Map (já carregado)&#10;          const contrato = contratosMap.get(Number(obra.contrato_id));&#10;          &#10;          if (contrato) {&#10;            console.log(`✅ Contrato encontrado para obra ${obra.id}: ${contrato.numero_contrato} - Valor: R$ ${contrato.valor ?? 'NULL'}`);&#10;          } else {&#10;            console.log(`❌ Contrato ${obra.contrato_id} não encontrado para obra ${obra.id}`);&#10;          }&#10;          &#10;          // Buscar arquivos da obra - agrupados por contrato_numero&#10;          let arquivos: RowDataPacket[] = [];&#10;          let arquivosContrato: RowDataPacket[] = [];&#10;&#10;          try {&#10;            // Buscar arquivos da própria obra&#10;            const [result] = await connectionObras!.query&lt;RowDataPacket[]&gt;(&#10;              `SELECT id, tipo, nome_arquivo, path_servidor, obra_id&#10;               FROM arquivoobra &#10;               WHERE obra_id = ?&#10;               ORDER BY tipo ASC, id ASC`,&#10;              [obra.id]&#10;            );&#10;            arquivos = result || [];&#10;            console.log(` Arquivos para obra ${obra.id}: ${arquivos.length}`);&#10;&#10;            // Se a obra tem contrato, buscar também arquivos de outras obras com mesmo contrato_numero&#10;            if (contrato?.numero_contrato &amp;&amp; obra.contrato_numero) {&#10;              // Buscar todas as obras com mesmo contrato_numero&#10;              const [obrasRelacionadas] = await connectionObras!.query&lt;RowDataPacket[]&gt;(&#10;                `SELECT id FROM obra WHERE contrato_numero = ? AND id != ?`,&#10;                [obra.contrato_numero, obra.id]&#10;              );&#10;&#10;              if (obrasRelacionadas &amp;&amp; obrasRelacionadas.length &gt; 0) {&#10;                const obraIds = obrasRelacionadas.map((o: RowDataPacket) =&gt; o.id);&#10;                const placeholders = obraIds.map(() =&gt; '?').join(',');&#10;&#10;                // Buscar arquivos de todas as obras relacionadas&#10;                const [resultRelacionados] = await connectionObras!.query&lt;RowDataPacket[]&gt;(&#10;                  `SELECT id, tipo, nome_arquivo, path_servidor, obra_id&#10;                   FROM arquivoobra &#10;                   WHERE obra_id IN (${placeholders})&#10;                   ORDER BY obra_id ASC, tipo ASC, id ASC`,&#10;                  obraIds&#10;                );&#10;                arquivosContrato = resultRelacionados || [];&#10;                console.log(` Arquivos do contrato ${obra.contrato_numero}: ${arquivosContrato.length}`);&#10;              }&#10;            }&#10;          } catch (arquivoError) {&#10;            console.error(`Erro ao buscar arquivos da obra ${obra.id}:`, arquivoError);&#10;            arquivos = [];&#10;            arquivosContrato = [];&#10;          }&#10;          &#10;          return {&#10;            ...obra,&#10;            numero_contrato: contrato?.numero_contrato || null,&#10;            objeto_contrato: contrato?.objetoh || null,&#10;            valor_contrato: contrato?.valor ?? null,&#10;            arquivos: arquivos.map((arq: RowDataPacket) =&gt; ({&#10;              id: arq.id,&#10;              tipo: (arq.tipo as string) || 'Arquivo',&#10;              nome: (arq.nome_arquivo as string) || (arq.nome as string) || 'Arquivo sem nome',&#10;              url: `https://epamigsistema.com/obras/web/${arq.path_servidor}`,&#10;              obra_id: arq.obra_id&#10;            })),&#10;            arquivos_contrato: arquivosContrato.map((arq: RowDataPacket) =&gt; ({&#10;              id: arq.id,&#10;              tipo: (arq.tipo as string) || 'Arquivo',&#10;              nome: (arq.nome_arquivo as string) || (arq.nome as string) || 'Arquivo sem nome',&#10;              url: `https://epamigsistema.com/obras/web/${arq.path_servidor}`,&#10;              obra_id: arq.obra_id&#10;            }))&#10;          };&#10;        } catch (error) {&#10;          console.error(`❌ Erro ao processar obra ${obra.id}:`, error);&#10;          return {&#10;            ...obra,&#10;            numero_contrato: null,&#10;            objeto_contrato: null,&#10;            valor_contrato: null,&#10;            arquivos: []&#10;          };&#10;        }&#10;      })&#10;    );&#10;&#10;    // Buscar contagem por status para o gráfico (com filtros aplicados)&#10;    const [statusCount] = await connectionObras.query&lt;RowDataPacket[]&gt;(&#10;      `SELECT &#10;          status_id,&#10;          COUNT(*) as total&#10;       FROM (&#10;          SELECT &#10;              o.status_id,&#10;              ROW_NUMBER() OVER (PARTITION BY o.contrato_numero ORDER BY o.id DESC) as rn&#10;          FROM obra o&#10;          ${whereClause}&#10;       ) as subquery&#10;       WHERE rn = 1&#10;       GROUP BY status_id&#10;       ORDER BY status_id ASC`,&#10;      queryParams&#10;    );&#10;&#10;    // Buscar lista de regionais para o filtro&#10;    const [regionais] = await connectionObras.query&lt;RowDataPacket[]&gt;(&#10;      `SELECT id, nome FROM regional ORDER BY nome ASC`&#10;    );&#10;&#10;    console.log(`Total de status diferentes: ${statusCount.length}`);&#10;&#10;    // Ordenar obras pelo ano do contrato (primeiros 4 dígitos de numero_contrato) em ordem decrescente&#10;    const obrasOrdenadas = obrasComContratos.sort((a, b) =&gt; {&#10;      const anoA = a.numero_contrato ? parseInt(a.numero_contrato.split('/')[0]) : 0;&#10;      const anoB = b.numero_contrato ? parseInt(b.numero_contrato.split('/')[0]) : 0;&#10;      return anoB - anoA; // Ordem decrescente (ano mais recente primeiro)&#10;    });&#10;&#10;    return NextResponse.json({&#10;      success: true,&#10;      obras: obrasOrdenadas,&#10;      statusCount,&#10;      regionais,&#10;    });&#10;    &#10;  } catch (error: unknown) {&#10;    console.error(&quot;Erro detalhado ao buscar obras:&quot;, error);&#10;&#10;    // Type guard para erro do banco/SQL&#10;    const isDbError = (e: unknown): e is { code?: string; sqlMessage?: string; message?: string } =&gt; {&#10;      return typeof e === 'object' &amp;&amp; e !== null &amp;&amp; (&#10;        'code' in (e as object) || 'sqlMessage' in (e as object) || 'message' in (e as object)&#10;      );&#10;    };&#10;&#10;    // Verificar tipo de erro&#10;    let errorMessage = &quot;Erro ao buscar obras do banco de dados&quot;;&#10;&#10;    if (isDbError(error)) {&#10;      if (error.code === 'ECONNREFUSED') {&#10;        errorMessage = &quot;Não foi possível conectar ao banco de dados. Verifique se o MySQL está rodando.&quot;;&#10;      } else if (error.code === 'ER_NO_SUCH_TABLE') {&#10;        errorMessage = &quot;Tabela 'obra' não encontrada no banco de dados.&quot;;&#10;      } else if (error.code === 'ER_BAD_DB_ERROR') {&#10;        errorMessage = &quot;Banco de dados 'obra' não encontrado.&quot;;&#10;      } else if (error.sqlMessage) {&#10;        errorMessage = `Erro SQL: ${error.sqlMessage}`;&#10;      }&#10;    }&#10;&#10;    return NextResponse.json(&#10;      {&#10;        success: false,&#10;        error: errorMessage,&#10;        details: isDbError(error) &amp;&amp; error.message ? error.message : String(error),&#10;      },&#10;      { status: 500 }&#10;    );&#10;  } finally {&#10;    // Garantir que as conexões sejam liberadas&#10;    if (connectionObras) {&#10;      connectionObras.release();&#10;    }&#10;    if (connectionContratos) {&#10;      connectionContratos.release();&#10;    }&#10;  }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/components/ObraDetalhes.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/components/ObraDetalhes.tsx" />
              <option name="originalContent" value="&quot;use client&quot;;&#10;&#10;import { useState } from &quot;react&quot;;&#10;&#10;interface Arquivo {&#10;  id: number;&#10;  tipo: string;&#10;  nome: string;&#10;  url: string;&#10;  obra_id?: number;&#10;}&#10;&#10;interface ArquivoContrato {&#10;  id: number;&#10;  tipo: string;&#10;  nome: string;&#10;  url: string;&#10;  obra_id: number;&#10;}&#10;&#10;interface Obra {&#10;  id: number;&#10;  contrato_id: number;&#10;  status_id: number;&#10;  numero_contrato: string | null;&#10;  objeto_contrato: string | null;&#10;  valor_contrato: number | null;&#10;  regional_nome: string;&#10;  arquivos: Arquivo[];&#10;  arquivos_contrato?: ArquivoContrato[];&#10;}&#10;&#10;interface ObraDetalhesProps {&#10;  obra: Obra;&#10;  onClose: () =&gt; void;&#10;}&#10;&#10;const tiposProjetos: { [key: string]: { label: string; icon: string } } = {&#10;  'projeto_arquitetonico_pdf': { label: 'Projeto Arquitetônico (PDF)', icon: '' },&#10;  'projeto_arquitetonico_dwg': { label: 'Projeto Arquitetônico (DWG)', icon: '' },&#10;  'projeto_estrutural_pdf': { label: 'Projeto Estrutural (PDF)', icon: '️' },&#10;  'projeto_estrutural_dwg': { label: 'Projeto Estrutural (DWG)', icon: '️' },&#10;  'projeto_fundacoes_pdf': { label: 'Projeto de Fundações (PDF)', icon: '⚓' },&#10;  'projeto_fundacoes_dwg': { label: 'Projeto de Fundações (DWG)', icon: '⚓' },&#10;  'projeto_hidrossanitario_pdf': { label: 'Projeto Hidrossanitário (PDF)', icon: '' },&#10;  'projeto_hidrossanitario_dwg': { label: 'Projeto Hidrossanitário (DWG)', icon: '' },&#10;  'projeto_eletrico_pdf': { label: 'Projeto Elétrico (PDF)', icon: '⚡' },&#10;  'projeto_eletrico_dwg': { label: 'Projeto Elétrico (DWG)', icon: '⚡' },&#10;  'projeto_luminotecnico_pdf': { label: 'Projeto Luminotécnico (PDF)', icon: '' },&#10;  'projeto_luminotecnico_dwg': { label: 'Projeto Luminotécnico (DWG)', icon: '' },&#10;  'projeto_terraplanagem_pdf': { label: 'Projeto Terraplanagem (PDF)', icon: '️' },&#10;  'projeto_terraplanagem_dwg': { label: 'Projeto Terraplanagem (DWG)', icon: '️' },&#10;  'projeto_pci_pdf': { label: 'Projeto PCI (PDF)', icon: '' },&#10;  'projeto_pci_dwg': { label: 'Projeto PCI (DWG)', icon: '' },&#10;  'arquivo_outros': { label: 'Outros Arquivos', icon: '' },&#10;};&#10;&#10;const tiposDocumentos: { [key: string]: { label: string; icon: string } } = {&#10;  'Basico': { label: 'Básico', icon: '' },&#10;  'Executivo': { label: 'Executivo', icon: '' },&#10;  'Obra_foto': { label: 'Foto da Obra', icon: '' },&#10;};&#10;&#10;const tiposMedicao: { [key: string]: { label: string; icon: string } } = {&#10;  'Relatorio': { label: 'Relatório de Acompanhamento', icon: '' },&#10;  'Fiscal': { label: 'Nota Fiscal', icon: '' },&#10;  'Cronograma': { label: 'Cronograma de Acompanhamento', icon: '' },&#10;  'Acompanhamento_Medicao_XLS': { label: 'Acompanhamento Medição XLS', icon: '' },&#10;  'Medicaopdf': { label: 'Medição PDF', icon: '' },&#10;};&#10;&#10;const statusNames: { [key: number]: string } = {&#10;  1: &quot;Sem Pagamento&quot;,&#10;  2: &quot;Não Iniciado&quot;,&#10;  3: &quot;Em Andamento&quot;,&#10;  4: &quot;Início de Paralisação&quot;,&#10;  5: &quot;Paralisado&quot;,&#10;  6: &quot;Concluído&quot;,&#10;  7: &quot;Elaboração de Projetos&quot;,&#10;};&#10;&#10;const statusColors: { [key: number]: string } = {&#10;  1: &quot;#ef4444&quot;,&#10;  2: &quot;#f59e0b&quot;,&#10;  3: &quot;#3b82f6&quot;,&#10;  4: &quot;#f97316&quot;,&#10;  5: &quot;#6b7280&quot;,&#10;  6: &quot;#10b981&quot;,&#10;  7: &quot;#8b5cf6&quot;,&#10;};&#10;&#10;export default function ObraDetalhes({ obra, onClose }: ObraDetalhesProps) {&#10;  const [abaAtiva, setAbaAtiva] = useState&lt;'projetos' | 'documentos' | 'medicao'&gt;('projetos');&#10;&#10;  // Agrupar arquivos por tipo&#10;  const agruparArquivosPorTipo = (arquivos: Arquivo[]) =&gt; {&#10;    const grupos: { [key: string]: Arquivo[] } = {};&#10;    arquivos.forEach(arq =&gt; {&#10;      if (!grupos[arq.tipo]) {&#10;        grupos[arq.tipo] = [];&#10;      }&#10;      grupos[arq.tipo].push(arq);&#10;    });&#10;    return grupos;&#10;  };&#10;&#10;  const arquivosPorTipo = agruparArquivosPorTipo(obra.arquivos);&#10;  const arquivosContratoPorTipo = obra.arquivos_contrato&#10;    ? agruparArquivosPorTipo(obra.arquivos_contrato)&#10;    : {};&#10;&#10;  const formatarValor = (valor: number | null): string =&gt; {&#10;    if (!valor || valor === 0 || isNaN(valor)) return &quot;Não informado&quot;;&#10;    return new Intl.NumberFormat('pt-BR', {&#10;      style: 'currency',&#10;      currency: 'BRL',&#10;    }).format(valor);&#10;  };&#10;&#10;  const renderArquivo = (arquivo: Arquivo, mostrarOrigem: boolean = false) =&gt; (&#10;    &lt;div&#10;      key={arquivo.id}&#10;      className=&quot;flex items-center gap-2 p-2 bg-gray-50 rounded-md border border-gray-200 hover:bg-gray-100 transition-colors&quot;&#10;    &gt;&#10;      &lt;a&#10;        href={arquivo.url}&#10;        target=&quot;_blank&quot;&#10;        rel=&quot;noopener noreferrer&quot;&#10;        className=&quot;flex-1 text-sm text-green-700 hover:text-green-900 truncate flex items-center gap-2&quot;&#10;      &gt;&#10;        &lt;span className=&quot;text-green-600&quot;&gt;&lt;/span&gt;&#10;        &lt;span className=&quot;truncate&quot;&gt;{arquivo.nome}&lt;/span&gt;&#10;      &lt;/a&gt;&#10;      {mostrarOrigem &amp;&amp; arquivo.obra_id !== obra.id &amp;&amp; (&#10;        &lt;span className=&quot;text-xs bg-blue-600 text-white px-2 py-1 rounded&quot;&gt;&#10;          Aditivo&#10;        &lt;/span&gt;&#10;      )}&#10;    &lt;/div&gt;&#10;  );&#10;&#10;  const renderSecaoProjetos = () =&gt; {&#10;    const projetosNaObra = Object.keys(tiposProjetos).filter(tipo =&gt; arquivosPorTipo[tipo]);&#10;    const projetosNoContrato = Object.keys(tiposProjetos).filter(tipo =&gt; arquivosContratoPorTipo[tipo]);&#10;&#10;    if (projetosNaObra.length === 0 &amp;&amp; projetosNoContrato.length === 0) {&#10;      return &lt;p className=&quot;text-gray-500 text-center py-8&quot;&gt;Nenhum projeto cadastrado&lt;/p&gt;;&#10;    }&#10;&#10;    // Combinar projetos únicos&#10;    const tiposUnicos = [...new Set([...projetosNaObra, ...projetosNoContrato])];&#10;&#10;    return (&#10;      &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4&quot;&gt;&#10;        {tiposUnicos.map(tipo =&gt; {&#10;          const config = tiposProjetos[tipo];&#10;          const arquivosDaObra = arquivosPorTipo[tipo] || [];&#10;          const arquivosDoContrato = arquivosContratoPorTipo[tipo] || [];&#10;          const todosArquivos = [...arquivosDaObra, ...arquivosDoContrato];&#10;&#10;          return (&#10;            &lt;div key={tipo} className=&quot;bg-white border border-gray-200 rounded-lg p-4 shadow-sm&quot;&gt;&#10;              &lt;div className=&quot;flex items-center gap-2 mb-3&quot;&gt;&#10;                &lt;span className=&quot;text-2xl&quot;&gt;{config.icon}&lt;/span&gt;&#10;                &lt;h4 className=&quot;font-semibold text-sm text-gray-800&quot;&gt;{config.label}&lt;/h4&gt;&#10;              &lt;/div&gt;&#10;              &lt;div className=&quot;space-y-2&quot;&gt;&#10;                {todosArquivos.map(arq =&gt; renderArquivo(arq, true))}&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;          );&#10;        })}&#10;      &lt;/div&gt;&#10;    );&#10;  };&#10;&#10;  const renderSecaoDocumentos = () =&gt; {&#10;    const documentosNaObra = Object.keys(tiposDocumentos).filter(tipo =&gt; arquivosPorTipo[tipo]);&#10;    const documentosNoContrato = Object.keys(tiposDocumentos).filter(tipo =&gt; arquivosContratoPorTipo[tipo]);&#10;&#10;    if (documentosNaObra.length === 0 &amp;&amp; documentosNoContrato.length === 0) {&#10;      return &lt;p className=&quot;text-gray-500 text-center py-8&quot;&gt;Nenhum documento cadastrado&lt;/p&gt;;&#10;    }&#10;&#10;    const tiposUnicos = [...new Set([...documentosNaObra, ...documentosNoContrato])];&#10;&#10;    return (&#10;      &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4&quot;&gt;&#10;        {tiposUnicos.map(tipo =&gt; {&#10;          const config = tiposDocumentos[tipo];&#10;          const arquivosDaObra = arquivosPorTipo[tipo] || [];&#10;          const arquivosDoContrato = arquivosContratoPorTipo[tipo] || [];&#10;          const todosArquivos = [...arquivosDaObra, ...arquivosDoContrato];&#10;&#10;          return (&#10;            &lt;div key={tipo} className=&quot;bg-white border border-gray-200 rounded-lg p-4 shadow-sm&quot;&gt;&#10;              &lt;div className=&quot;flex items-center gap-2 mb-3&quot;&gt;&#10;                &lt;span className=&quot;text-2xl&quot;&gt;{config.icon}&lt;/span&gt;&#10;                &lt;h4 className=&quot;font-semibold text-sm text-gray-800&quot;&gt;{config.label}&lt;/h4&gt;&#10;              &lt;/div&gt;&#10;              &lt;div className=&quot;space-y-2&quot;&gt;&#10;                {todosArquivos.map(arq =&gt; renderArquivo(arq, true))}&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;          );&#10;        })}&#10;      &lt;/div&gt;&#10;    );&#10;  };&#10;&#10;  const renderSecaoMedicao = () =&gt; {&#10;    const medicoesNaObra = Object.keys(tiposMedicao).filter(tipo =&gt; arquivosPorTipo[tipo]);&#10;    const medicoesNoContrato = Object.keys(tiposMedicao).filter(tipo =&gt; arquivosContratoPorTipo[tipo]);&#10;&#10;    if (medicoesNaObra.length === 0 &amp;&amp; medicoesNoContrato.length === 0) {&#10;      return &lt;p className=&quot;text-gray-500 text-center py-8&quot;&gt;Nenhum documento de medição cadastrado&lt;/p&gt;;&#10;    }&#10;&#10;    const tiposUnicos = [...new Set([...medicoesNaObra, ...medicoesNoContrato])];&#10;&#10;    return (&#10;      &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4&quot;&gt;&#10;        {tiposUnicos.map(tipo =&gt; {&#10;          const config = tiposMedicao[tipo];&#10;          const arquivosDaObra = arquivosPorTipo[tipo] || [];&#10;          const arquivosDoContrato = arquivosContratoPorTipo[tipo] || [];&#10;          const todosArquivos = [...arquivosDaObra, ...arquivosDoContrato];&#10;&#10;          return (&#10;            &lt;div key={tipo} className=&quot;bg-white border border-gray-200 rounded-lg p-4 shadow-sm&quot;&gt;&#10;              &lt;div className=&quot;flex items-center gap-2 mb-3&quot;&gt;&#10;                &lt;span className=&quot;text-2xl&quot;&gt;{config.icon}&lt;/span&gt;&#10;                &lt;h4 className=&quot;font-semibold text-sm text-gray-800&quot;&gt;{config.label}&lt;/h4&gt;&#10;              &lt;/div&gt;&#10;              &lt;div className=&quot;space-y-2&quot;&gt;&#10;                {todosArquivos.map(arq =&gt; renderArquivo(arq, true))}&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;          );&#10;        })}&#10;      &lt;/div&gt;&#10;    );&#10;  };&#10;&#10;  return (&#10;    &lt;div className=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto&quot;&gt;&#10;      &lt;div className=&quot;bg-white rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col&quot;&gt;&#10;        {/* Header */}&#10;        &lt;div className=&quot;bg-gradient-to-r from-green-800 to-green-600 text-white p-6 flex justify-between items-start&quot;&gt;&#10;          &lt;div className=&quot;flex-1&quot;&gt;&#10;            &lt;h2 className=&quot;text-2xl font-bold mb-2&quot;&gt;Detalhes da Obra&lt;/h2&gt;&#10;            &lt;p className=&quot;text-green-100 text-sm&quot;&gt;{obra.regional_nome}&lt;/p&gt;&#10;          &lt;/div&gt;&#10;          &lt;button&#10;            onClick={onClose}&#10;            className=&quot;text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-colors&quot;&#10;          &gt;&#10;            &lt;svg className=&quot;w-6 h-6&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot;&gt;&#10;              &lt;path strokeLinecap=&quot;round&quot; strokeLinejoin=&quot;round&quot; strokeWidth={2} d=&quot;M6 18L18 6M6 6l12 12&quot; /&gt;&#10;            &lt;/svg&gt;&#10;          &lt;/button&gt;&#10;        &lt;/div&gt;&#10;&#10;        {/* Informações do Contrato */}&#10;        &lt;div className=&quot;bg-green-50 border-b-2 border-green-800 p-4&quot;&gt;&#10;          &lt;h3 className=&quot;text-lg font-semibold text-green-900 mb-3 flex items-center gap-2&quot;&gt;&#10;            &lt;span&gt;&lt;/span&gt; Contrato Associado&#10;          &lt;/h3&gt;&#10;          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4&quot;&gt;&#10;            &lt;div&gt;&#10;              &lt;p className=&quot;text-xs text-gray-600 mb-1&quot;&gt;Nº Contrato&lt;/p&gt;&#10;              &lt;p className=&quot;font-semibold text-gray-900&quot;&gt;&#10;                {obra.numero_contrato || 'Não informado'}&#10;              &lt;/p&gt;&#10;            &lt;/div&gt;&#10;            &lt;div&gt;&#10;              &lt;p className=&quot;text-xs text-gray-600 mb-1&quot;&gt;Valor&lt;/p&gt;&#10;              &lt;p className=&quot;font-semibold text-green-700&quot;&gt;&#10;                {formatarValor(obra.valor_contrato)}&#10;              &lt;/p&gt;&#10;            &lt;/div&gt;&#10;            &lt;div&gt;&#10;              &lt;p className=&quot;text-xs text-gray-600 mb-1&quot;&gt;Status&lt;/p&gt;&#10;              &lt;span&#10;                className=&quot;inline-block px-3 py-1 rounded-full text-xs font-semibold text-white&quot;&#10;                style={{ backgroundColor: statusColors[obra.status_id] }}&#10;              &gt;&#10;                {statusNames[obra.status_id]}&#10;              &lt;/span&gt;&#10;            &lt;/div&gt;&#10;            &lt;div&gt;&#10;              &lt;p className=&quot;text-xs text-gray-600 mb-1&quot;&gt;Objeto&lt;/p&gt;&#10;              &lt;p className=&quot;font-semibold text-gray-900 text-sm line-clamp-2&quot;&gt;&#10;                {obra.objeto_contrato || 'Não informado'}&#10;              &lt;/p&gt;&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;        {/* Abas */}&#10;        &lt;div className=&quot;border-b border-gray-200 bg-gray-50&quot;&gt;&#10;          &lt;div className=&quot;flex overflow-x-auto&quot;&gt;&#10;            &lt;button&#10;              onClick={() =&gt; setAbaAtiva('projetos')}&#10;              className={`px-6 py-3 font-medium text-sm whitespace-nowrap transition-colors border-b-2 ${&#10;                abaAtiva === 'projetos'&#10;                  ? 'border-green-800 text-green-800 bg-white'&#10;                  : 'border-transparent text-gray-600 hover:text-green-800 hover:border-gray-300'&#10;              }`}&#10;            &gt;&#10;               Projetos de Engenharia&#10;            &lt;/button&gt;&#10;            &lt;button&#10;              onClick={() =&gt; setAbaAtiva('documentos')}&#10;              className={`px-6 py-3 font-medium text-sm whitespace-nowrap transition-colors border-b-2 ${&#10;                abaAtiva === 'documentos'&#10;                  ? 'border-green-800 text-green-800 bg-white'&#10;                  : 'border-transparent text-gray-600 hover:text-green-800 hover:border-gray-300'&#10;              }`}&#10;            &gt;&#10;               Documentos da Obra&#10;            &lt;/button&gt;&#10;            &lt;button&#10;              onClick={() =&gt; setAbaAtiva('medicao')}&#10;              className={`px-6 py-3 font-medium text-sm whitespace-nowrap transition-colors border-b-2 ${&#10;                abaAtiva === 'medicao'&#10;                  ? 'border-green-800 text-green-800 bg-white'&#10;                  : 'border-transparent text-gray-600 hover:text-green-800 hover:border-gray-300'&#10;              }`}&#10;            &gt;&#10;               Medição e Acompanhamento&#10;            &lt;/button&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;        {/* Conteúdo das Abas */}&#10;        &lt;div className=&quot;flex-1 overflow-y-auto bg-gray-50&quot;&gt;&#10;          {abaAtiva === 'projetos' &amp;&amp; renderSecaoProjetos()}&#10;          {abaAtiva === 'documentos' &amp;&amp; renderSecaoDocumentos()}&#10;          {abaAtiva === 'medicao' &amp;&amp; renderSecaoMedicao()}&#10;        &lt;/div&gt;&#10;&#10;        {/* Footer */}&#10;        &lt;div className=&quot;bg-gray-100 p-4 border-t border-gray-200 flex justify-end&quot;&gt;&#10;          &lt;button&#10;            onClick={onClose}&#10;            className=&quot;px-6 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors font-medium&quot;&#10;          &gt;&#10;            Fechar&#10;          &lt;/button&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  );&#10;}&#10;&#10;" />
              <option name="updatedContent" value="&quot;use client&quot;;&#10;&#10;import { useState } from &quot;react&quot;;&#10;&#10;interface Arquivo {&#10;  id: number;&#10;  tipo: string;&#10;  nome: string;&#10;  url: string;&#10;  obra_id?: number;&#10;}&#10;&#10;interface ArquivoContrato {&#10;  id: number;&#10;  tipo: string;&#10;  nome: string;&#10;  url: string;&#10;  obra_id: number;&#10;}&#10;&#10;interface Obra {&#10;  id: number;&#10;  contrato_id: number;&#10;  status_id: number;&#10;  numero_contrato: string | null;&#10;  objeto_contrato: string | null;&#10;  valor_contrato: number | null;&#10;  regional_nome: string;&#10;  arquivos: Arquivo[];&#10;  arquivos_contrato?: ArquivoContrato[];&#10;}&#10;&#10;interface ObraDetalhesProps {&#10;  obra: Obra;&#10;  onClose: () =&gt; void;&#10;}&#10;&#10;const tiposProjetos: { [key: string]: { label: string; icon: string } } = {&#10;  'projeto_arquitetonico_pdf': { label: 'Projeto Arquitetônico (PDF)', icon: '' },&#10;  'projeto_arquitetonico_dwg': { label: 'Projeto Arquitetônico (DWG)', icon: '' },&#10;  'projeto_estrutural_pdf': { label: 'Projeto Estrutural (PDF)', icon: '️' },&#10;  'projeto_estrutural_dwg': { label: 'Projeto Estrutural (DWG)', icon: '️' },&#10;  'projeto_fundacoes_pdf': { label: 'Projeto de Fundações (PDF)', icon: '⚓' },&#10;  'projeto_fundacoes_dwg': { label: 'Projeto de Fundações (DWG)', icon: '⚓' },&#10;  'projeto_hidrossanitario_pdf': { label: 'Projeto Hidrossanitário (PDF)', icon: '' },&#10;  'projeto_hidrossanitario_dwg': { label: 'Projeto Hidrossanitário (DWG)', icon: '' },&#10;  'projeto_eletrico_pdf': { label: 'Projeto Elétrico (PDF)', icon: '⚡' },&#10;  'projeto_eletrico_dwg': { label: 'Projeto Elétrico (DWG)', icon: '⚡' },&#10;  'projeto_luminotecnico_pdf': { label: 'Projeto Luminotécnico (PDF)', icon: '' },&#10;  'projeto_luminotecnico_dwg': { label: 'Projeto Luminotécnico (DWG)', icon: '' },&#10;  'projeto_terraplanagem_pdf': { label: 'Projeto Terraplanagem (PDF)', icon: '️' },&#10;  'projeto_terraplanagem_dwg': { label: 'Projeto Terraplanagem (DWG)', icon: '️' },&#10;  'projeto_pci_pdf': { label: 'Projeto PCI (PDF)', icon: '' },&#10;  'projeto_pci_dwg': { label: 'Projeto PCI (DWG)', icon: '' },&#10;  'arquivo_outros': { label: 'Outros Arquivos', icon: '' },&#10;};&#10;&#10;const tiposDocumentos: { [key: string]: { label: string; icon: string } } = {&#10;  'Basico': { label: 'Básico', icon: '' },&#10;  'Executivo': { label: 'Executivo', icon: '' },&#10;  'Obra_foto': { label: 'Foto da Obra', icon: '' },&#10;};&#10;&#10;const tiposMedicao: { [key: string]: { label: string; icon: string } } = {&#10;  'Relatorio': { label: 'Relatório de Acompanhamento', icon: '' },&#10;  'Fiscal': { label: 'Nota Fiscal', icon: '' },&#10;  'Cronograma': { label: 'Cronograma de Acompanhamento', icon: '' },&#10;  'Acompanhamento_Medicao_XLS': { label: 'Acompanhamento Medição XLS', icon: '' },&#10;  'Medicaopdf': { label: 'Medição PDF', icon: '' },&#10;};&#10;&#10;const statusNames: { [key: number]: string } = {&#10;  1: &quot;Sem Pagamento&quot;,&#10;  2: &quot;Não Iniciado&quot;,&#10;  3: &quot;Em Andamento&quot;,&#10;  4: &quot;Início de Paralisação&quot;,&#10;  5: &quot;Paralisado&quot;,&#10;  6: &quot;Concluído&quot;,&#10;  7: &quot;Elaboração de Projetos&quot;,&#10;};&#10;&#10;const statusColors: { [key: number]: string } = {&#10;  1: &quot;#ef4444&quot;,&#10;  2: &quot;#f59e0b&quot;,&#10;  3: &quot;#3b82f6&quot;,&#10;  4: &quot;#f97316&quot;,&#10;  5: &quot;#6b7280&quot;,&#10;  6: &quot;#10b981&quot;,&#10;  7: &quot;#8b5cf6&quot;,&#10;};&#10;&#10;export default function ObraDetalhes({ obra, onClose }: ObraDetalhesProps) {&#10;  const [abaAtiva, setAbaAtiva] = useState&lt;'projetos' | 'documentos' | 'medicao'&gt;('projetos');&#10;&#10;  // Agrupar arquivos por tipo&#10;  const agruparArquivosPorTipo = (arquivos: Arquivo[]) =&gt; {&#10;    const grupos: { [key: string]: Arquivo[] } = {};&#10;    arquivos.forEach(arq =&gt; {&#10;      if (!grupos[arq.tipo]) {&#10;        grupos[arq.tipo] = [];&#10;      }&#10;      grupos[arq.tipo].push(arq);&#10;    });&#10;    return grupos;&#10;  };&#10;&#10;  const arquivosPorTipo = agruparArquivosPorTipo(obra.arquivos);&#10;  const arquivosContratoPorTipo = obra.arquivos_contrato&#10;    ? agruparArquivosPorTipo(obra.arquivos_contrato)&#10;    : {};&#10;&#10;  const formatarValor = (valor: number | null): string =&gt; {&#10;    if (!valor || valor === 0 || isNaN(valor)) return &quot;Não informado&quot;;&#10;    return new Intl.NumberFormat('pt-BR', {&#10;      style: 'currency',&#10;      currency: 'BRL',&#10;    }).format(valor);&#10;  };&#10;&#10;  const renderArquivo = (arquivo: Arquivo, mostrarOrigem: boolean = false) =&gt; (&#10;    &lt;div&#10;      key={arquivo.id}&#10;      className=&quot;flex items-center gap-2 p-2 bg-gray-50 rounded-md border border-gray-200 hover:bg-gray-100 transition-colors&quot;&#10;    &gt;&#10;      &lt;a&#10;        href={arquivo.url}&#10;        target=&quot;_blank&quot;&#10;        rel=&quot;noopener noreferrer&quot;&#10;        className=&quot;flex-1 text-sm text-green-700 hover:text-green-900 truncate flex items-center gap-2&quot;&#10;      &gt;&#10;        &lt;span className=&quot;text-green-600&quot;&gt;&lt;/span&gt;&#10;        &lt;span className=&quot;truncate&quot;&gt;{arquivo.nome}&lt;/span&gt;&#10;      &lt;/a&gt;&#10;      {mostrarOrigem &amp;&amp; arquivo.obra_id !== obra.id &amp;&amp; (&#10;        &lt;span className=&quot;text-xs bg-blue-600 text-white px-2 py-1 rounded&quot;&gt;&#10;          Aditivo&#10;        &lt;/span&gt;&#10;      )}&#10;    &lt;/div&gt;&#10;  );&#10;&#10;  const renderSecaoProjetos = () =&gt; {&#10;    const projetosNaObra = Object.keys(tiposProjetos).filter(tipo =&gt; arquivosPorTipo[tipo]);&#10;    const projetosNoContrato = Object.keys(tiposProjetos).filter(tipo =&gt; arquivosContratoPorTipo[tipo]);&#10;&#10;    if (projetosNaObra.length === 0 &amp;&amp; projetosNoContrato.length === 0) {&#10;      return &lt;p className=&quot;text-gray-500 text-center py-8&quot;&gt;Nenhum projeto cadastrado&lt;/p&gt;;&#10;    }&#10;&#10;    // Combinar projetos únicos&#10;    const tiposUnicos = [...new Set([...projetosNaObra, ...projetosNoContrato])];&#10;&#10;    return (&#10;      &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4&quot;&gt;&#10;        {tiposUnicos.map(tipo =&gt; {&#10;          const config = tiposProjetos[tipo];&#10;          const arquivosDaObra = arquivosPorTipo[tipo] || [];&#10;          const arquivosDoContrato = arquivosContratoPorTipo[tipo] || [];&#10;          const todosArquivos = [...arquivosDaObra, ...arquivosDoContrato];&#10;&#10;          return (&#10;            &lt;div key={tipo} className=&quot;bg-white border border-gray-200 rounded-lg p-4 shadow-sm&quot;&gt;&#10;              &lt;div className=&quot;flex items-center gap-2 mb-3&quot;&gt;&#10;                &lt;span className=&quot;text-2xl&quot;&gt;{config.icon}&lt;/span&gt;&#10;                &lt;h4 className=&quot;font-semibold text-sm text-gray-800&quot;&gt;{config.label}&lt;/h4&gt;&#10;              &lt;/div&gt;&#10;              &lt;div className=&quot;space-y-2&quot;&gt;&#10;                {todosArquivos.map(arq =&gt; renderArquivo(arq, true))}&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;          );&#10;        })}&#10;      &lt;/div&gt;&#10;    );&#10;  };&#10;&#10;  const renderSecaoDocumentos = () =&gt; {&#10;    const documentosNaObra = Object.keys(tiposDocumentos).filter(tipo =&gt; arquivosPorTipo[tipo]);&#10;    const documentosNoContrato = Object.keys(tiposDocumentos).filter(tipo =&gt; arquivosContratoPorTipo[tipo]);&#10;&#10;    if (documentosNaObra.length === 0 &amp;&amp; documentosNoContrato.length === 0) {&#10;      return &lt;p className=&quot;text-gray-500 text-center py-8&quot;&gt;Nenhum documento cadastrado&lt;/p&gt;;&#10;    }&#10;&#10;    const tiposUnicos = [...new Set([...documentosNaObra, ...documentosNoContrato])];&#10;&#10;    return (&#10;      &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4&quot;&gt;&#10;        {tiposUnicos.map(tipo =&gt; {&#10;          const config = tiposDocumentos[tipo];&#10;          const arquivosDaObra = arquivosPorTipo[tipo] || [];&#10;          const arquivosDoContrato = arquivosContratoPorTipo[tipo] || [];&#10;          const todosArquivos = [...arquivosDaObra, ...arquivosDoContrato];&#10;&#10;          return (&#10;            &lt;div key={tipo} className=&quot;bg-white border border-gray-200 rounded-lg p-4 shadow-sm&quot;&gt;&#10;              &lt;div className=&quot;flex items-center gap-2 mb-3&quot;&gt;&#10;                &lt;span className=&quot;text-2xl&quot;&gt;{config.icon}&lt;/span&gt;&#10;                &lt;h4 className=&quot;font-semibold text-sm text-gray-800&quot;&gt;{config.label}&lt;/h4&gt;&#10;              &lt;/div&gt;&#10;              &lt;div className=&quot;space-y-2&quot;&gt;&#10;                {todosArquivos.map(arq =&gt; renderArquivo(arq, true))}&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;          );&#10;        })}&#10;      &lt;/div&gt;&#10;    );&#10;  };&#10;&#10;  const renderSecaoMedicao = () =&gt; {&#10;    const medicoesNaObra = Object.keys(tiposMedicao).filter(tipo =&gt; arquivosPorTipo[tipo]);&#10;    const medicoesNoContrato = Object.keys(tiposMedicao).filter(tipo =&gt; arquivosContratoPorTipo[tipo]);&#10;&#10;    if (medicoesNaObra.length === 0 &amp;&amp; medicoesNoContrato.length === 0) {&#10;      return &lt;p className=&quot;text-gray-500 text-center py-8&quot;&gt;Nenhum documento de medição cadastrado&lt;/p&gt;;&#10;    }&#10;&#10;    const tiposUnicos = [...new Set([...medicoesNaObra, ...medicoesNoContrato])];&#10;&#10;    return (&#10;      &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4&quot;&gt;&#10;        {tiposUnicos.map(tipo =&gt; {&#10;          const config = tiposMedicao[tipo];&#10;          const arquivosDaObra = arquivosPorTipo[tipo] || [];&#10;          const arquivosDoContrato = arquivosContratoPorTipo[tipo] || [];&#10;          const todosArquivos = [...arquivosDaObra, ...arquivosDoContrato];&#10;&#10;          return (&#10;            &lt;div key={tipo} className=&quot;bg-white border border-gray-200 rounded-lg p-4 shadow-sm&quot;&gt;&#10;              &lt;div className=&quot;flex items-center gap-2 mb-3&quot;&gt;&#10;                &lt;span className=&quot;text-2xl&quot;&gt;{config.icon}&lt;/span&gt;&#10;                &lt;h4 className=&quot;font-semibold text-sm text-gray-800&quot;&gt;{config.label}&lt;/h4&gt;&#10;              &lt;/div&gt;&#10;              &lt;div className=&quot;space-y-2&quot;&gt;&#10;                {todosArquivos.map(arq =&gt; renderArquivo(arq, true))}&#10;              &lt;/div&gt;&#10;            &lt;/div&gt;&#10;          );&#10;        })}&#10;      &lt;/div&gt;&#10;    );&#10;  };&#10;&#10;  return (&#10;    &lt;div className=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto&quot;&gt;&#10;      &lt;div className=&quot;bg-white rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col&quot;&gt;&#10;        {/* Header */}&#10;        &lt;div className=&quot;bg-gradient-to-r from-green-800 to-green-600 text-white p-6 flex justify-between items-start&quot;&gt;&#10;          &lt;div className=&quot;flex-1&quot;&gt;&#10;            &lt;h2 className=&quot;text-2xl font-bold mb-2&quot;&gt;Detalhes da Obra&lt;/h2&gt;&#10;            &lt;p className=&quot;text-green-100 text-sm&quot;&gt;{obra.regional_nome}&lt;/p&gt;&#10;          &lt;/div&gt;&#10;          &lt;button&#10;            onClick={onClose}&#10;            className=&quot;text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-colors&quot;&#10;          &gt;&#10;            &lt;svg className=&quot;w-6 h-6&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot;&gt;&#10;              &lt;path strokeLinecap=&quot;round&quot; strokeLinejoin=&quot;round&quot; strokeWidth={2} d=&quot;M6 18L18 6M6 6l12 12&quot; /&gt;&#10;            &lt;/svg&gt;&#10;          &lt;/button&gt;&#10;        &lt;/div&gt;&#10;&#10;        {/* Informações do Contrato */}&#10;        &lt;div className=&quot;bg-green-50 border-b-2 border-green-800 p-4&quot;&gt;&#10;          &lt;h3 className=&quot;text-lg font-semibold text-green-900 mb-3 flex items-center gap-2&quot;&gt;&#10;            &lt;span&gt;&lt;/span&gt; Contrato Associado&#10;          &lt;/h3&gt;&#10;          &lt;div className=&quot;grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4&quot;&gt;&#10;            &lt;div&gt;&#10;              &lt;p className=&quot;text-xs text-gray-600 mb-1&quot;&gt;Nº Contrato&lt;/p&gt;&#10;              &lt;p className=&quot;font-semibold text-gray-900&quot;&gt;&#10;                {obra.numero_contrato || 'Não informado'}&#10;              &lt;/p&gt;&#10;            &lt;/div&gt;&#10;            &lt;div&gt;&#10;              &lt;p className=&quot;text-xs text-gray-600 mb-1&quot;&gt;Valor&lt;/p&gt;&#10;              &lt;p className=&quot;font-semibold text-green-700&quot;&gt;&#10;                {formatarValor(obra.valor_contrato)}&#10;              &lt;/p&gt;&#10;            &lt;/div&gt;&#10;            &lt;div&gt;&#10;              &lt;p className=&quot;text-xs text-gray-600 mb-1&quot;&gt;Status&lt;/p&gt;&#10;              &lt;span&#10;                className=&quot;inline-block px-3 py-1 rounded-full text-xs font-semibold text-white&quot;&#10;                style={{ backgroundColor: statusColors[obra.status_id] }}&#10;              &gt;&#10;                {statusNames[obra.status_id]}&#10;              &lt;/span&gt;&#10;            &lt;/div&gt;&#10;            &lt;div&gt;&#10;              &lt;p className=&quot;text-xs text-gray-600 mb-1&quot;&gt;Objeto&lt;/p&gt;&#10;              &lt;p className=&quot;font-semibold text-gray-900 text-sm line-clamp-2&quot;&gt;&#10;                {obra.objeto_contrato || 'Não informado'}&#10;              &lt;/p&gt;&#10;            &lt;/div&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;        {/* Abas */}&#10;        &lt;div className=&quot;border-b border-gray-200 bg-gray-50&quot;&gt;&#10;          &lt;div className=&quot;flex overflow-x-auto&quot;&gt;&#10;            &lt;button&#10;              onClick={() =&gt; setAbaAtiva('projetos')}&#10;              className={`px-6 py-3 font-medium text-sm whitespace-nowrap transition-colors border-b-2 ${&#10;                abaAtiva === 'projetos'&#10;                  ? 'border-green-800 text-green-800 bg-white'&#10;                  : 'border-transparent text-gray-600 hover:text-green-800 hover:border-gray-300'&#10;              }`}&#10;            &gt;&#10;               Projetos de Engenharia&#10;            &lt;/button&gt;&#10;            &lt;button&#10;              onClick={() =&gt; setAbaAtiva('documentos')}&#10;              className={`px-6 py-3 font-medium text-sm whitespace-nowrap transition-colors border-b-2 ${&#10;                abaAtiva === 'documentos'&#10;                  ? 'border-green-800 text-green-800 bg-white'&#10;                  : 'border-transparent text-gray-600 hover:text-green-800 hover:border-gray-300'&#10;              }`}&#10;            &gt;&#10;               Documentos da Obra&#10;            &lt;/button&gt;&#10;            &lt;button&#10;              onClick={() =&gt; setAbaAtiva('medicao')}&#10;              className={`px-6 py-3 font-medium text-sm whitespace-nowrap transition-colors border-b-2 ${&#10;                abaAtiva === 'medicao'&#10;                  ? 'border-green-800 text-green-800 bg-white'&#10;                  : 'border-transparent text-gray-600 hover:text-green-800 hover:border-gray-300'&#10;              }`}&#10;            &gt;&#10;               Medição e Acompanhamento&#10;            &lt;/button&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;&#10;        {/* Conteúdo das Abas */}&#10;        &lt;div className=&quot;flex-1 overflow-y-auto bg-gray-50&quot;&gt;&#10;          {abaAtiva === 'projetos' &amp;&amp; renderSecaoProjetos()}&#10;          {abaAtiva === 'documentos' &amp;&amp; renderSecaoDocumentos()}&#10;          {abaAtiva === 'medicao' &amp;&amp; renderSecaoMedicao()}&#10;        &lt;/div&gt;&#10;&#10;        {/* Footer */}&#10;        &lt;div className=&quot;bg-gray-100 p-4 border-t border-gray-200 flex justify-end&quot;&gt;&#10;          &lt;button&#10;            onClick={onClose}&#10;            className=&quot;px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors font-medium&quot;&#10;          &gt;&#10;            Fechar&#10;          &lt;/button&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  );&#10;}&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>